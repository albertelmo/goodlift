<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Elmo ì„œë¹„ìŠ¤">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Elmo</title>
    <link rel="manifest" href="/elmo/manifest.json">
    <link rel="stylesheet" href="/elmo/css/elmo.css">
    <meta name="theme-color" content="#1976d2">
</head>
<body>
    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ (body ì§í•˜ìœ„ë¡œ ì´ë™í•˜ì—¬ overflow ë¬¸ì œ ë°©ì§€) -->
    <div id="elmo-register-modal" style="display:none;">
        <div class="elmo-modal-content">
            <div class="elmo-modal-header">
                <h2>íšŒì›ê°€ì…</h2>
                <button type="button" id="elmo-register-close" class="elmo-modal-close">&times;</button>
            </div>
            <form id="elmo-register-form" class="elmo-form">
                <div class="elmo-form-group">
                    <label for="elmo-register-username">ì•„ì´ë””</label>
                    <input type="text" id="elmo-register-username" name="username" required autocomplete="username">
                </div>
                <div class="elmo-form-group">
                    <label for="elmo-register-password">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="elmo-register-password" name="password" required autocomplete="new-password">
                </div>
                <div class="elmo-form-group">
                    <label for="elmo-register-name">ì´ë¦„</label>
                    <input type="text" id="elmo-register-name" name="name" required>
                </div>
                <div class="elmo-form-group">
                    <label for="elmo-register-email">ì´ë©”ì¼ (ì„ íƒ)</label>
                    <input type="email" id="elmo-register-email" name="email" autocomplete="email">
                </div>
                <div id="elmo-register-result" class="elmo-result"></div>
                <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px;">
                    <button type="button" id="elmo-register-cancel" class="elmo-btn elmo-btn-secondary">ì·¨ì†Œ</button>
                    <button type="submit" class="elmo-btn elmo-btn-primary">ê°€ì…í•˜ê¸°</button>
                </div>
            </form>
        </div>
    </div>

    <div id="elmo-app">
        <!-- ë¡œê·¸ì¸ í™”ë©´ -->
        <div id="elmo-login-section" class="elmo-section">
            <div class="elmo-login-container">
                <div class="elmo-logo">
                    <h1>Elmo</h1>
                </div>
                <form id="elmo-login-form" class="elmo-form">
                    <div class="elmo-form-group">
                        <label for="elmo-username">ì•„ì´ë””</label>
                        <input type="text" id="elmo-username" name="username" required autocomplete="username">
                    </div>
                    <div class="elmo-form-group">
                        <label for="elmo-password">ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" id="elmo-password" name="password" required autocomplete="current-password">
                    </div>
                    <div id="elmo-login-result" class="elmo-result"></div>
                    <button type="submit" class="elmo-btn elmo-btn-primary">ë¡œê·¸ì¸</button>
                </form>
                <button type="button" id="elmo-register-btn" class="elmo-btn elmo-btn-text" style="margin-top: 8px; width: 100%;">íšŒì›ê°€ì…</button>
            </div>
        </div>

        <!-- íšŒì›ê°€ì… ë²„íŠ¼ ì¸ë¼ì¸ ì´ë²¤íŠ¸ ë°”ì¸ë”© (ì¦‰ì‹œ ì‹¤í–‰) -->
        <script>
            (function() {
                function setupRegisterButton() {
                    const btn = document.getElementById('elmo-register-btn');
                    if (btn) {
                        // ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆ ì œê±° í›„ ì¬ë“±ë¡
                        const newBtn = btn.cloneNode(true);
                        btn.parentNode.replaceChild(newBtn, btn);
                        const registerBtn = document.getElementById('elmo-register-btn');
                        registerBtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            const modal = document.getElementById('elmo-register-modal');
                            if (modal) {
                                // ëª¨ë‹¬ì´ body ì§í•˜ìœ„ì— ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ì´ë™
                                if (modal.parentElement !== document.body) {
                                    document.body.appendChild(modal);
                                }
                                
                                // ëª¨ë‹¬ í‘œì‹œ - position: fixedì™€ flex ì •ë ¬ì´ ì œëŒ€ë¡œ ì ìš©ë˜ë„ë¡ ëª…ì‹œ
                                modal.style.display = 'flex';
                                modal.style.flexDirection = 'row';
                                modal.style.justifyContent = 'center';
                                modal.style.alignItems = 'center';
                                modal.style.position = 'fixed';
                                modal.style.top = '0';
                                modal.style.left = '0';
                                modal.style.right = '0';
                                modal.style.bottom = '0';
                                modal.style.width = '100vw';
                                modal.style.height = '100vh';
                                modal.style.zIndex = '10000';
                                modal.style.background = '#f5f5f5';
                                modal.style.margin = '0';
                                modal.style.padding = '24px';
                                modal.style.boxSizing = 'border-box';
                                
                                const form = document.getElementById('elmo-register-form');
                                const resultDiv = document.getElementById('elmo-register-result');
                                if (form) form.reset();
                                if (resultDiv) {
                                    resultDiv.textContent = '';
                                    resultDiv.className = 'elmo-result';
                                }
                            }
                        });
                    } else {
                        setTimeout(setupRegisterButton, 100);
                    }
                }
                // ì¦‰ì‹œ ì‹¤í–‰
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', setupRegisterButton);
                } else {
                    setupRegisterButton();
                }
                // ì¶”ê°€ ì•ˆì „ì¥ì¹˜
                window.addEventListener('load', setupRegisterButton);
            })();
        </script>

        <!-- ë©”ì¸ í™”ë©´ -->
        <div id="elmo-main-section" class="elmo-section" style="display:none;">
            <!-- í—¤ë” -->
            <header class="elmo-header">
                <button class="elmo-hamburger-btn" id="elmo-hamburger-btn">â˜°</button>
                <h1 class="elmo-header-title">Elmo</h1>
            </header>

            <!-- ì‚¬ì´ë“œ ë“œë¡œì–´ -->
            <div id="elmo-drawer" class="elmo-drawer">
                <div class="elmo-drawer-header">
                    <h2>ë©”ë‰´</h2>
                    <button class="elmo-drawer-close" id="elmo-drawer-close">&times;</button>
                </div>
                <div class="elmo-drawer-content">
                    <div class="elmo-drawer-user">
                        <div class="elmo-drawer-avatar" id="elmo-drawer-avatar">U</div>
                        <div class="elmo-drawer-user-info">
                            <div class="elmo-drawer-user-name" id="elmo-drawer-user-name">ì‚¬ìš©ì</div>
                            <div class="elmo-drawer-user-id" id="elmo-drawer-user-id">username</div>
                        </div>
                    </div>
                    <div class="elmo-drawer-menu">
                        <a href="#" class="elmo-drawer-item" data-screen="home">
                            <span class="elmo-drawer-item-icon">ğŸ </span>
                            <span class="elmo-drawer-item-label">í™ˆ</span>
                        </a>
                        <a href="#" class="elmo-drawer-item" data-screen="calendar">
                            <span class="elmo-drawer-item-icon">ğŸ“…</span>
                            <span class="elmo-drawer-item-label">ìº˜ë¦°ë”</span>
                        </a>
                        <a href="#" class="elmo-drawer-item" data-screen="goodlift">
                            <span class="elmo-drawer-item-icon">ğŸ’ª</span>
                            <span class="elmo-drawer-item-label">êµ¿ë¦¬í”„íŠ¸</span>
                        </a>
                        <a href="#" class="elmo-drawer-item" data-screen="profile">
                            <span class="elmo-drawer-item-icon">ğŸ‘¤</span>
                            <span class="elmo-drawer-item-label">ë‚´ì •ë³´</span>
                        </a>
                    </div>
                    <div class="elmo-drawer-footer">
                        <a href="#" class="elmo-drawer-item" id="elmo-drawer-account-management" data-screen="account-management" style="display: none;">
                            <span class="elmo-drawer-item-icon">âš™ï¸</span>
                            <span class="elmo-drawer-item-label">ê³„ì •ê´€ë¦¬</span>
                        </a>
                        <button class="elmo-drawer-item elmo-drawer-item-logout" id="elmo-drawer-logout">
                            <span class="elmo-drawer-item-icon">ğŸšª</span>
                            <span class="elmo-drawer-item-label">ë¡œê·¸ì•„ì›ƒ</span>
                        </button>
                    </div>
                </div>
            </div>
            <div id="elmo-drawer-overlay" class="elmo-drawer-overlay" style="display:none;"></div>

            <!-- ë©”ì¸ ì½˜í…ì¸  -->
            <main class="elmo-content" id="elmo-content"></main>

            <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
            <nav class="elmo-bottom-nav">
                <a href="#" class="elmo-bottom-nav-item active" data-screen="home">
                    <span class="elmo-bottom-nav-icon">ğŸ </span>
                    <span class="elmo-bottom-nav-label">í™ˆ</span>
                </a>
                <a href="#" class="elmo-bottom-nav-item" data-screen="calendar">
                    <span class="elmo-bottom-nav-icon">ğŸ“…</span>
                    <span class="elmo-bottom-nav-label">ìº˜ë¦°ë”</span>
                </a>
                <a href="#" class="elmo-bottom-nav-item" data-screen="goodlift">
                    <span class="elmo-bottom-nav-icon">ğŸ’ª</span>
                    <span class="elmo-bottom-nav-label">êµ¿ë¦¬í”„íŠ¸</span>
                </a>
                <a href="#" class="elmo-bottom-nav-item" data-screen="profile">
                    <span class="elmo-bottom-nav-icon">ğŸ‘¤</span>
                    <span class="elmo-bottom-nav-label">ë‚´ì •ë³´</span>
                </a>
            </nav>
        </div>
    </div>

    <script type="module" src="/elmo/js/elmo-main.js"></script>
</body>
</html>
