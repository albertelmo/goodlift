<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>GoodLift</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1976d2">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/adminDayCalendar.css">
    <link rel="stylesheet" href="css/adminWeekCalendar.css">
</head>
<body>
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:0;">
      <div style="display:flex;align-items:center;gap:8px;">
        <img id="mainLogo" src="img/logo.png" alt="GoodLift 로고" style="height:38px;cursor:pointer; margin-top:16px; margin-bottom:8px;" />
        <button id="secretBtn" title="관리자 기능" style="display:none;background:none;border:none;cursor:pointer;font-size:12px;color:#666;padding:4px;border-radius:4px;transition:all 0.2s;" aria-label="관리자 기능">🔒</button>
      </div>
      <div class="header-btns">
        <button id="settingsBtn" title="설정" style="display:none;" aria-label="설정">
          <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#1976d2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 5 15.4a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 5 8.6a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09A1.65 1.65 0 0 0 16 4.6a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19 8.6a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09A1.65 1.65 0 0 0 19.4 15z"/></svg>
        </button>
        <button id="logoutBtn" title="로그아웃" style="display:none;" aria-label="로그아웃">🚪</button>
      </div>
    </div>
    <div id="authSection">
        <div id="loginSection" class="form-box">
            <form id="loginForm">
                <div class="form-row">
                    <label for="login-username">아이디:</label>
                    <input type="text" id="login-username" name="username" required>
                </div>
                <div class="form-row">
                    <label for="login-password">비밀번호:</label>
                    <input type="password" id="login-password" name="password" required>
                </div>
                <button type="submit">로그인</button>
            </form>
            <div id="login-result"></div>
            <button id="showSignupBtn" style="display:block; margin:0 auto 20px auto;">회원가입</button>
        </div>
        <div id="signupSection" class="form-box" style="display:none;">
            <h3>회원가입</h3>
            <form id="signupForm">
                <div class="form-row">
                    <label for="signup-username">아이디:</label>
                    <input type="text" id="signup-username" name="username" required>
                </div>
                <div class="form-row">
                    <label for="signup-password">비밀번호:</label>
                    <input type="password" id="signup-password" name="password" required>
                </div>
                <div class="form-row">
                    <label for="signup-password2">비밀번호 확인:</label>
                    <input type="password" id="signup-password2" name="password2" required>
                </div>
                <div class="form-row">
                    <label for="signup-name">이름:</label>
                    <input type="text" id="signup-name" name="name" required>
                </div>
                <div class="form-row">
                    <label for="signup-role">역할:</label>
                    <select id="signup-role" name="role" required>
                        <option value="admin">관리자</option>
                        <option value="su">슈퍼관리자(SU)</option>
                        <option value="center">센터관리자</option>
                        <option value="trainer">트레이너</option>
                    </select>
                </div>
                <div class="form-row" id="signup-center-row" style="display:none;">
                    <label for="signup-center">센터 선택:</label>
                    <select id="signup-center" name="center">
                        <option value="">센터 선택</option>
                    </select>
                </div>
                <button type="submit">회원가입</button>
            </form>
            <div id="signup-result"></div>
            <button id="backToLoginBtn" style="display:block; margin:0 auto 10px auto;">로그인으로 돌아가기</button>
        </div>
    </div>
    <div id="accountSettingsModalBg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="accountSettingsModal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:32px 28px 24px 28px;border-radius:14px;box-shadow:0 8px 32px #1976d240;min-width:320px;max-width:90vw;">
      <h3 style="margin-top:0;margin-bottom:18px;color:#1976d2;font-size:1.15rem;">계정 정보 변경</h3>
      <form id="changePwForm">
        <div class="form-row">
          <label for="currentPw">현재 비밀번호</label>
          <input type="password" id="currentPw" name="currentPw" required>
        </div>
        <div class="form-row">
          <label for="newPw">새 비밀번호</label>
          <input type="password" id="newPw" name="newPw" required>
        </div>
        <div class="form-row">
          <label for="newPw2">새 비밀번호 확인</label>
          <input type="password" id="newPw2" name="newPw2" required>
        </div>
        <div id="changePwResult" style="min-height:22px;color:#d32f2f;margin-bottom:8px;"></div>
        <div style="display:flex;gap:10px;justify-content:flex-end;">
          <button type="button" id="closeAccountSettingsBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="submit">비밀번호 변경</button>
        </div>
      </form>
    </div>

    <!-- 비밀번호 입력 모달 -->
    <div id="secretPasswordModalBg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="secretPasswordModal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:32px 28px 24px 28px;border-radius:14px;box-shadow:0 8px 32px #1976d240;min-width:320px;max-width:90vw;">
      <h3 style="margin-top:0;margin-bottom:18px;color:#d32f2f;font-size:1.15rem;">관리자 인증</h3>
      <form id="secretPasswordForm">
        <div class="form-row">
          <label for="secretPassword">관리자 비밀번호</label>
          <input type="password" id="secretPassword" name="secretPassword" required>
        </div>
        <div id="secretPasswordResult" style="min-height:22px;color:#d32f2f;margin-bottom:8px;"></div>
        <div style="display:flex;gap:10px;justify-content:flex-end;">
          <button type="button" id="closeSecretPasswordBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="submit">확인</button>
        </div>
      </form>
    </div>

    <!-- 매출 수정/삭제 모달 -->
    <div id="sales-edit-modal-bg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="sales-edit-modal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:12px;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.2);width:240px;max-width:calc(100vw - 32px);max-height:90vh;overflow-y:auto;">
      <h3 style="margin-top:0;margin-bottom:10px;color:#1976d2;font-size:1rem;">매출 내역 수정</h3>
      <form id="sales-edit-form">
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">날짜</label>
          <input type="date" id="sales-edit-date" required style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">회원명</label>
          <input type="text" id="sales-edit-member-name" required style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:flex;align-items:center;gap:6px;font-size:0.8rem;color:#666;font-weight:600;">
            <input type="checkbox" id="sales-edit-is-new" style="width:16px;height:16px;cursor:pointer;" />
            <span>신규</span>
          </label>
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">회원권</label>
          <input type="text" id="sales-edit-membership" style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">결제방법</label>
          <select id="sales-edit-payment-method" style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;">
            <option value="">선택하세요</option>
            <option value="카드">카드</option>
            <option value="계좌이체">계좌이체</option>
            <option value="현금">현금</option>
            <option value="매니저">매니저</option>
            <option value="환불">환불</option>
          </select>
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">금액</label>
          <input type="text" id="sales-edit-amount" required style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:8px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">비고</label>
          <textarea id="sales-edit-notes" rows="2" style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;resize:vertical;"></textarea>
        </div>
        <div id="sales-edit-result" style="min-height:16px;margin-bottom:6px;font-size:0.8rem;"></div>
        <div style="display:flex;gap:6px;justify-content:space-between;align-items:center;">
          <button type="button" id="sales-edit-delete-btn" style="background:#dc3545;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:0.85rem;">삭제</button>
          <div style="display:flex;gap:6px;">
            <button type="button" id="sales-edit-cancel-btn" style="background:#eee;color:#333;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:0.85rem;">취소</button>
            <button type="submit" style="background:#1976d2;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:0.85rem;">저장</button>
          </div>
        </div>
      </form>
    </div>

    <!-- 매출 추가 모달 -->
    <div id="sales-add-modal-bg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="sales-add-modal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:12px;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.2);width:240px;max-width:calc(100vw - 32px);max-height:90vh;overflow-y:auto;">
      <h3 style="margin-top:0;margin-bottom:10px;color:#1976d2;font-size:1rem;">매출 내역 추가</h3>
      <form id="sales-add-form">
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">날짜</label>
          <input type="date" id="sales-add-date" required style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">회원명</label>
          <input type="text" id="sales-add-member-name" required style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:flex;align-items:center;gap:6px;font-size:0.8rem;color:#666;font-weight:600;">
            <input type="checkbox" id="sales-add-is-new" style="width:16px;height:16px;cursor:pointer;" />
            <span>신규</span>
          </label>
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">회원권</label>
          <input type="text" id="sales-add-membership" style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">결제방법</label>
          <select id="sales-add-payment-method" style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;">
            <option value="">선택하세요</option>
            <option value="카드">카드</option>
            <option value="계좌이체">계좌이체</option>
            <option value="현금">현금</option>
            <option value="매니저">매니저</option>
            <option value="환불">환불</option>
          </select>
        </div>
        <div style="margin-bottom:6px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">금액</label>
          <input type="text" id="sales-add-amount" required style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;" />
        </div>
        <div style="margin-bottom:8px;">
          <label style="display:block;margin-bottom:1px;font-size:0.8rem;color:#666;font-weight:600;">비고</label>
          <textarea id="sales-add-notes" rows="2" style="width:200px;max-width:100%;padding:4px 6px;border:1px solid #ddd;border-radius:4px;font-size:0.85rem;resize:vertical;"></textarea>
        </div>
        <div id="sales-add-result" style="min-height:16px;margin-bottom:6px;font-size:0.8rem;"></div>
        <div style="display:flex;gap:6px;justify-content:flex-end;">
          <button type="button" id="sales-add-cancel-btn" style="background:#eee;color:#333;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:0.85rem;">취소</button>
          <button type="submit" style="background:#1976d2;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:0.85rem;">저장</button>
        </div>
      </form>
    </div>

    <!-- 회원 삭제 모달 -->
    <div id="memberDeleteModalBg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="memberDeleteModal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:24px;border-radius:14px;box-shadow:0 8px 32px #1976d240;min-width:400px;max-width:90vw;max-height:80vh;overflow-y:auto;">
      <h3 style="margin-top:0;margin-bottom:18px;color:#d32f2f;font-size:1.15rem;">회원 삭제</h3>
      <div id="memberSearchSection">
        <div class="form-row">
          <label for="memberNameInput">회원 이름</label>
          <input type="text" id="memberNameInput" name="memberName" placeholder="삭제할 회원 이름을 입력하세요" required>
        </div>
        <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px;">
          <button type="button" id="closeMemberDeleteBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="button" id="searchMemberBtn" style="background:#1976d2;color:#fff;">검색</button>
        </div>
      </div>
      <div id="memberInfoSection" style="display:none;">
        <div style="border:1px solid #ddd;border-radius:8px;padding:12px;margin:12px 0;background:#f9f9f9;">
          <h4 style="margin-top:0;margin-bottom:8px;color:#1976d2;font-size:1rem;">회원 정보</h4>
          <div id="memberInfoContent" style="font-size:0.9rem;"></div>
        </div>
        <div style="border:1px solid #ddd;border-radius:8px;padding:12px;margin:12px 0;background:#fff3cd;">
          <h4 style="margin-top:0;margin-bottom:8px;color:#856404;font-size:1rem;">세션 정보</h4>
          <div id="memberSessionInfoContent" style="font-size:0.9rem;"></div>
        </div>
        <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:16px;padding-top:12px;border-top:1px solid #eee;">
          <button type="button" id="cancelDeleteBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="button" id="confirmDeleteBtn" style="background:#d32f2f;color:#fff;">삭제 확인</button>
        </div>
      </div>
    </div>

    <!-- 세션 삭제 모달 -->
    <div id="sessionDeleteModalBg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="sessionDeleteModal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:24px;border-radius:14px;box-shadow:0 8px 32px #1976d240;min-width:400px;max-width:90vw;max-height:80vh;overflow-y:auto;">
      <h3 style="margin-top:0;margin-bottom:18px;color:#d32f2f;font-size:1.15rem;">세션 삭제</h3>
      <div id="sessionSearchSection">
        <div class="form-row">
          <label for="sessionMemberNameInput">회원 이름</label>
          <input type="text" id="sessionMemberNameInput" name="sessionMemberName" placeholder="삭제할 세션의 회원 이름을 입력하세요" required>
        </div>
        <div class="form-row">
          <label for="sessionDateInput">날짜</label>
          <input type="date" id="sessionDateInput" name="sessionDate" required>
        </div>
        <div class="form-row">
          <label for="sessionTimeInput">시간</label>
          <select id="sessionTimeInput" name="sessionTime" required>
            <option value="">시간 선택</option>
            <option value="06:00">06:00</option>
            <option value="06:30">06:30</option>
            <option value="07:00">07:00</option>
            <option value="07:30">07:30</option>
            <option value="08:00">08:00</option>
            <option value="08:30">08:30</option>
            <option value="09:00">09:00</option>
            <option value="09:30">09:30</option>
            <option value="10:00">10:00</option>
            <option value="10:30">10:30</option>
            <option value="11:00">11:00</option>
            <option value="11:30">11:30</option>
            <option value="12:00">12:00</option>
            <option value="12:30">12:30</option>
            <option value="13:00">13:00</option>
            <option value="13:30">13:30</option>
            <option value="14:00">14:00</option>
            <option value="14:30">14:30</option>
            <option value="15:00">15:00</option>
            <option value="15:30">15:30</option>
            <option value="16:00">16:00</option>
            <option value="16:30">16:30</option>
            <option value="17:00">17:00</option>
            <option value="17:30">17:30</option>
            <option value="18:00">18:00</option>
            <option value="18:30">18:30</option>
            <option value="19:00">19:00</option>
            <option value="19:30">19:30</option>
            <option value="20:00">20:00</option>
            <option value="20:30">20:30</option>
            <option value="21:00">21:00</option>
            <option value="21:30">21:30</option>
            <option value="22:00">22:00</option>
          </select>
        </div>
        <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px;">
          <button type="button" id="closeSessionDeleteBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="button" id="searchSessionBtn" style="background:#1976d2;color:#fff;">검색</button>
        </div>
      </div>
      <div id="sessionInfoSection" style="display:none;">
        <div style="border:1px solid #ddd;border-radius:8px;padding:12px;margin:12px 0;background:#f9f9f9;">
          <h4 style="margin-top:0;margin-bottom:8px;color:#1976d2;font-size:1rem;">세션 정보</h4>
          <div id="sessionInfoContent" style="font-size:0.9rem;"></div>
        </div>
        <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:16px;padding-top:12px;border-top:1px solid #eee;">
          <button type="button" id="cancelSessionDeleteBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="button" id="confirmSessionDeleteBtn" style="background:#d32f2f;color:#fff;">삭제 확인</button>
        </div>
      </div>
    </div>

    <!-- 월별 통계 초기화 모달 -->
    <div id="monthlyStatsResetModalBg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="monthlyStatsResetModal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:24px;border-radius:14px;box-shadow:0 8px 32px #1976d240;min-width:400px;max-width:90vw;">
      <h3 style="margin-top:0;margin-bottom:18px;color:#d32f2f;font-size:1.15rem;">월별 통계 초기화</h3>
      <div id="monthlyStatsResetSection">
        <div class="form-row">
          <label for="yearMonthInput">연도-월</label>
          <input type="text" id="yearMonthInput" name="yearMonth" placeholder="YYYY-MM (예: 2025-01)" required>
        </div>
        <div style="margin:12px 0;padding:12px;background:#fff3cd;border-radius:8px;border:1px solid #ffeaa7;">
          <div style="font-size:0.9rem;color:#856404;">
            <strong>⚠️ 주의사항:</strong><br>
            • 해당 월의 모든 세션 통계가 0으로 초기화됩니다.<br>
            • 신규 세션과 재등록 세션 모두 0이 됩니다.<br>
            • 이 작업은 되돌릴 수 없습니다.
          </div>
        </div>
        <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:16px;">
          <button type="button" id="closeMonthlyStatsResetBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="button" id="resetMonthlyStatsBtn" style="background:#d32f2f;color:#fff;">초기화 실행</button>
        </div>
      </div>
    </div>

    <!-- 지출 내역 추가 모달 -->
    <div id="expenseAddModalBg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);"></div>
    <div id="expenseAddModal" style="display:none;position:fixed;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:18px 16px 16px 16px;border-radius:14px;box-shadow:0 8px 32px #1976d240;min-width:300px;max-width:90vw;max-height:85vh;overflow-y:auto;">
      <h3 style="margin-top:0;margin-bottom:8px;color:#1976d2;font-size:1.15rem;">💳 지출 내역 등록</h3>
      <form id="expenseAddForm">
        <div class="form-row expense-form-row">
          <label>지출 유형 *</label>
          <div style="display:flex;gap:16px;align-items:center;">
            <label style="display:flex;align-items:center;gap:6px;cursor:pointer;flex:none;">
              <input type="radio" name="expense-type" value="meal" id="expense-type-meal" checked style="width:18px;height:18px;cursor:pointer;">
              <span style="font-size:0.95rem;">식대</span>
            </label>
            <label style="display:flex;align-items:center;gap:6px;cursor:pointer;flex:none;">
              <input type="radio" name="expense-type" value="purchase" id="expense-type-purchase" style="width:18px;height:18px;cursor:pointer;">
              <span style="font-size:0.95rem;">구매</span>
            </label>
            <label style="display:flex;align-items:center;gap:6px;cursor:pointer;flex:none;">
              <input type="radio" name="expense-type" value="personal" id="expense-type-personal" style="width:18px;height:18px;cursor:pointer;">
              <span style="font-size:0.95rem;">개인지출</span>
            </label>
          </div>
        </div>
        <div class="form-row expense-form-row">
          <label for="expense-datetime">시각 *</label>
          <input type="datetime-local" id="expense-datetime" name="datetime" required>
        </div>
        <div id="expense-purchase-item-row" class="form-row expense-form-row" style="display:none;">
          <label for="expense-purchase-item">구매물품 *</label>
          <input type="text" id="expense-purchase-item" name="purchase-item" placeholder="구매물품명을 입력하세요">
        </div>
        <div id="expense-personal-item-row" class="form-row expense-form-row" style="display:none;">
          <label for="expense-personal-item">지출내역 *</label>
          <input type="text" id="expense-personal-item" name="personal-item" placeholder="지출내역을 입력하세요">
        </div>
        <div class="form-row expense-form-row">
          <label for="expense-amount">금액 *</label>
          <input type="number" id="expense-amount" name="amount" min="0" placeholder="원" required>
        </div>
        <div id="expense-trainers-row" class="form-row expense-form-row">
          <label class="expense-label-trainers">함께 지출한 트레이너 *</label>
          <div id="expense-trainers-list" class="expense-trainers-list"></div>
        </div>
        <div id="expense-center-row" class="form-row expense-form-row" style="display:none;">
          <label for="expense-center">센터 *</label>
          <select id="expense-center" name="center" style="flex:1;min-width:0;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:0.95rem;">
            <option value="">센터를 선택하세요</option>
          </select>
        </div>
        <div id="expense-personal-center-row" class="form-row expense-form-row" style="display:none;">
          <label for="expense-personal-center">센터 *</label>
          <select id="expense-personal-center" name="personal-center" style="flex:1;min-width:0;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:0.95rem;">
            <option value="">센터를 선택하세요</option>
          </select>
        </div>
        <div id="expenseAddResult" style="min-height:20px;color:#d32f2f;margin-bottom:4px;font-size:0.9rem;"></div>
        <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:8px;">
          <button type="button" id="closeExpenseAddBtn" style="background:#eee;color:#1976d2;">취소</button>
          <button type="submit">등록</button>
        </div>
      </form>
    </div>
    <div id="mainSection">
        <div id="tabBar" class="tab-bar"></div>
        <div id="tabContent" class="tab-content"></div>
    </div>
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/adminDayCalendar.js"></script>
    <script type="module" src="js/secret.js"></script>
    <script type="module" src="js/expense.js"></script>
    <script type="module" src="js/database.js"></script>
    <script>
        // Service Worker 등록
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('[PWA] Service Worker 등록 성공:', registration.scope);
                        
                        // 업데이트 확인
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('[PWA] 새로운 Service Worker 발견');
                            
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // 새 버전이 설치되었음을 알림
                                    console.log('[PWA] 새로운 버전 사용 가능');
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('[PWA] Service Worker 등록 실패:', error);
                    });
            });
            
            // Service Worker 업데이트 확인
            let refreshing = false;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (!refreshing) {
                    refreshing = true;
                    console.log('[PWA] Service Worker 업데이트, 페이지 새로고침');
                    // 페이지 새로고침 (선택사항)
                    // window.location.reload();
                }
            });
        }
    </script>
</body>
</html>
